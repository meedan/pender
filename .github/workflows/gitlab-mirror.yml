name: GitLab Mirror

on: 
  - push
  - delete

permissions:
  contents: read

jobs:
  sync:
    runs-on: ubuntu-latest
    name: Git Repo Sync
    steps:
    - uses: actions/checkout@v2
      with:
        fetch-depth: 0
    - uses: webfactory/ssh-agent@v0.9.0
      with:
        ssh-private-key: ${{ secrets.SSH_PRIVATE_KEY }}
    - uses: wangchucheng/git-repo-sync@v0.1.0
      with:
        target-url: git@gitlab.com:meedan/pender.git
